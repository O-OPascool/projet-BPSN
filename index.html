<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestion de Stock de Livres</title>

  <!-- Applique le th√®me enregistr√© avant le chargement du CSS -->
  <script>
    // si l'utilisateur a d√©j√† choisi 'dark' OU si le syst√®me est en dark mode ET qu'aucun choix n'est enregistr√©
    if (
      localStorage.getItem('theme') === 'dark' ||
      (!localStorage.getItem('theme') &&
       window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  </script>

  <!-- Importation d'une police moderne depuis Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <!-- Pr√©connexion pour acc√©l√©rer le chargement des couvertures Open Library -->
  <link rel="preconnect" href="https://covers.openlibrary.org">
  <!-- Votre fichier CSS principal -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Barre de navigation moderne -->
  <header>
    <nav class="navbar">
      <a href="index.html" class="navbar-brand">BIBLIO</a>
      <ul class="navbar-links">
        <li><a href="fonctionnalites.html">üìÑ Fonctionnalit√©s</a></li>
      </ul>
      <button id="mode-toggle" class="mode-toggle-btn">üåô</button>
    </nav>
  </header>

  <!-- Contenu principal de la page -->
  <div class="container">
    <h1>Recherche et Gestion de Stock</h1>

    <!-- Formulaire pour rechercher un livre via ISBN -->
    <form id="isbn-form" class="form">
      <input type="text" id="isbn" placeholder="Entrez un ISBN (10 ou 13 chiffres)" required>

      <select id="search-engine" title="Choisissez le moteur">
        <option value="auto" selected>Auto</option>
        <option value="google">Google</option>
        <option value="openlibrary">O.Library</option>
      </select>

      <button type="submit">Rechercher</button>
    </form>

    <!-- Spinner de chargement -->
    <div id="spinner" class="spinner hidden"></div>

    <!-- R√©sultats multiples sous forme d'onglets -->
    <div id="search-results" class="tabs hidden"></div>

    <!-- Informations sur le livre s√©lectionn√© -->
    <div id="book-info" class="hidden">
      <img id="cover" alt="Image de couverture">
      <p><strong>Titre :</strong> <span id="title"></span></p>
      <p><strong>Auteur :</strong> <span id="author"></span></p>
      <p><strong>R√©sum√© :</strong> <span id="summary"></span></p>

      <button id="fill-info-button" class="hidden">Compl√©ter les informations</button>

      <div id="manual-edit" class="hidden">
        <label for="manual-author">Auteur :</label>
        <input type="text" id="manual-author">
        <label for="manual-summary">R√©sum√© :</label>
        <textarea id="manual-summary" rows="5" cols="40"></textarea>
        <button id="save-manual-info">Enregistrer</button>
        <button id="cancel-manual-info">Annuler</button>
      </div>

      <p><strong>Disponibilit√© :</strong> <span id="stock" class="stock-info">V√©rification en cours...</span></p>

      <button id="confirm-add-book" style="display: none;">Confirmer l'ajout</button>
      <button id="cancel-add-book" style="display: none;">Annuler</button>

      <form id="stock-form" class="stock-form">
        <label for="new-stock">Mettre √† jour le stock :</label>
        <input type="number" id="new-stock" placeholder="Nombre d'exemplaires" required>
        <button type="submit">Mettre √† jour</button>
      </form>
    </div>

    <h2>Liste des Livres Disponibles</h2>
    <input type="text" id="search-book" placeholder="Rechercher par titre ou auteur...">
    <div id="book-list"></div>
    <div id="total-books-count" class="total-books">Total des livres disponibles : 0</div>
  </div>

  <!-- Module JS principal -->
  <script type="module" src="script.js"></script>

  <!-- Pied de page -->
  <footer class="text-center py-6 bg-gray-200 dark:bg-gray-800 dark:text-gray-400 transition-colors duration-500" data-aos="fade-up">
    <p>&copy; 2025 - Chef d'≈ìuvre BIBLIO<br>Tous droits r√©serv√©s</p>
  </footer>
</body>
</html>
