<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestion de Stock de Livres</title>
  <!-- Préconnexion pour accélérer le chargement des couvertures Open Library -->
  <link rel="preconnect" href="https://covers.openlibrary.org">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>Recherche et Gestion de Stock</h1>

    <!-- Formulaire pour rechercher un livre via ISBN -->
    <form id="isbn-form" class="form">
      <input type="text" id="isbn" placeholder="Entrez un ISBN (10 ou 13 chiffres)" required>

      <select id="search-engine" title="Choisissez le moteur">
        <option value="auto" selected>Auto</option>
        <option value="google">Google</option>
        <option value="openlibrary">O.Library</option>
      </select>

      <button type="submit">Rechercher</button>
    </form>

    <!-- Spinner pour indiquer le chargement -->
    <div id="spinner" class="spinner hidden"></div>

    <!-- Résultats multiples sous forme d'onglets -->
    <div id="search-results" class="tabs hidden"></div>

    <!-- Informations sur le livre sélectionné -->
    <div id="book-info" class="hidden">
      <img id="cover" alt="Image de couverture">
      <p><strong>Titre :</strong> <span id="title"></span></p>
      <p><strong>Auteur :</strong> <span id="author"></span></p>
      <p><strong>Résumé :</strong> <span id="summary"></span></p>

      <button id="fill-info-button" class="hidden">Compléter les informations</button>

      <div id="manual-edit" class="hidden">
        <label for="manual-author">Auteur :</label>
        <input type="text" id="manual-author">
        <label for="manual-summary">Résumé :</label>
        <textarea id="manual-summary" rows="5" cols="40"></textarea>
        <button id="save-manual-info">Enregistrer</button>
        <button id="cancel-manual-info">Annuler</button>
      </div>

      <p><strong>Disponibilité :</strong> <span id="stock" class="stock-info">Vérification en cours...</span></p>

      <button id="confirm-add-book" style="display: none;">Confirmer l'ajout</button>
      <button id="cancel-add-book" style="display: none;">Annuler</button>

      <form id="stock-form" class="stock-form">
        <label for="new-stock">Mettre à jour le stock :</label>
        <input type="number" id="new-stock" placeholder="Nombre d'exemplaires" required>
        <button type="submit">Mettre à jour</button>
      </form>
    </div>

    <h2>Liste des Livres Disponibles</h2>
    <input type="text" id="search-book" placeholder="Rechercher par titre ou auteur...">
    <div id="book-list"></div>
    <div id="total-books-count" class="total-books">Total des livres disponibles : 0</div>
  </div>
  <script type="module" src="script.js"></script>
</body>
</html>
